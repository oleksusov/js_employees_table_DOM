{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","thead","tbody","directions","Array","length","fill","employeesForm","createElement","offices","setAttribute","className","rows","cells","attribute","innerText","insertAdjacentHTML","innerHTML","toLowerCase","sortTable","i","direction","isDirection","sortedRows","sort","rowA","rowB","valueA","replaceAll","valueB","isNaN","localeCompare","append","addEventListener","e","target","cellIndex","closest","classList","remove","add","initialCellValue","cellInput","selectOption","value","text","selected","appendChild","type","size","addInputValueToTableCell","pushNotification","toLocaleString","style","currency","minimumFractionDigits","focus","ev","key","removeEventListener","button","inputs","querySelectorAll","select","preventDefault","isValidNameLength","isValidPositionLength","isValidAge","isValidSalary","blockHeightReserve","name","forEach","input","selectedIndex","posTop","posRight","title","description","container","blockTitle","desc","dataset","qa","textContent","top","right","setTimeout"],"mappings":"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","file":"main.e0cef46b.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nconst directions = new Array(thead.length).fill('');\nconst employeesForm = document.createElement('form');\nconst offices = [\n  'Tokyo', 'Singapore', 'London', 'New York', 'Edinburgh', 'San Francisco',\n];\n\nemployeesForm.setAttribute('method', 'post');\nemployeesForm.className = 'new-employee-form';\n\nfor (const attribute of thead.rows[0].cells) {\n  if (attribute.innerText === 'Office') {\n    employeesForm.insertAdjacentHTML('beforeend',\n      `<label>${attribute.innerHTML}: \n        <select name='${attribute.innerHTML}'\n          data-qa='${attribute.innerHTML.toLowerCase()}'>\n          <option value='${offices[0]}'>${offices[0]}</option>\n          <option value='${offices[1]}'>${offices[1]}</option>\n          <option value='${offices[2]}'>${offices[2]}</option>\n          <option value='${offices[3]}'>${offices[3]}</option>\n          <option value='${offices[4]}'>${offices[4]}</option>\n          <option value='${offices[5]}'>${offices[5]}</option>\n        </select>\n      </label>`\n    );\n  }\n\n  if (attribute.innerText === 'Age') {\n    employeesForm.insertAdjacentHTML('beforeend',\n      `<label>${attribute.innerHTML}: \n        <input name='${attribute.innerHTML}'\n        type='number'\n        data-qa='${attribute.innerHTML.toLowerCase()}'>\n      </label>`\n    );\n  }\n\n  if (attribute.innerText === 'Salary') {\n    employeesForm.insertAdjacentHTML('beforeend',\n      `<label>${attribute.innerHTML}: \n        <input name='${attribute.innerHTML}'\n        type='number'\n        data-qa='${attribute.innerHTML.toLowerCase()}'>\n      </label>`\n    );\n  }\n\n  if (attribute.innerText === 'Name' || attribute.innerText === 'Position') {\n    employeesForm.insertAdjacentHTML('beforeend',\n      `<label>${attribute.innerHTML}: \n        <input name='${attribute.innerHTML}'\n        type='text'\n        data-qa='${attribute.innerHTML.toLowerCase()}'>\n      </label>`\n    );\n  }\n}\n\nemployeesForm.insertAdjacentHTML('beforeend',\n  `<button type='submit'>Save to table</button>`);\n\nbody.append(employeesForm);\n\nfunction sortTable(i) {\n  const direction = directions[i] || 'asc';\n  const isDirection = (direction === 'asc') ? 1 : 0;\n\n  const sortedRows = [ ...tbody.rows ]\n    .sort((rowA, rowB) => {\n      const valueA = rowA.cells[i].innerHTML.replaceAll(/\\W/g, '');\n      const valueB = rowB.cells[i].innerHTML.replaceAll(/\\W/g, '');\n\n      if (isDirection) {\n        return isNaN(valueA)\n          ? valueA.localeCompare(valueB)\n          : valueA - valueB;\n      } else {\n        return isNaN(valueA)\n          ? valueB.localeCompare(valueA)\n          : valueB - valueA;\n      }\n    });\n\n  directions[i] = (direction === 'asc') ? 'desc' : 'asc';\n\n  tbody.append(...sortedRows);\n}\n\nthead.addEventListener('click', e => {\n  const index = e.target.cellIndex;\n\n  sortTable(index);\n});\n\ntbody.addEventListener('click', e => {\n  const target = e.target.closest('tr');\n\n  for (const tableRow of tbody.rows) {\n    tableRow.classList.remove('active');\n  }\n\n  target.classList.add('active');\n});\n\ntbody.addEventListener('dblclick', e => {\n  const target = e.target.closest('td');\n  let initialCellValue;\n\n  if (target.cellIndex !== 4) {\n    initialCellValue = target.innerText;\n  } else {\n    initialCellValue = target.innerText.replaceAll(/\\W/g, '');\n  }\n\n  target.innerText = '';\n\n  let cellInput;\n\n  if (target.cellIndex !== 2) {\n    cellInput = document.createElement('input');\n  } else {\n    cellInput = document.createElement('select');\n  }\n  cellInput.classList.add('cell-input');\n\n  if (target.cellIndex === 2) {\n    for (let i = 0; i < offices.length; i++) {\n      const selectOption = document.createElement('option');\n\n      selectOption.value = offices[i];\n      selectOption.text = offices[i];\n\n      if (offices[i] === initialCellValue) {\n        selectOption.selected = true;\n      }\n      cellInput.appendChild(selectOption);\n    }\n  } else {\n    cellInput.type = (target.cellIndex < 2) ? 'text' : 'number';\n    cellInput.value = initialCellValue;\n    cellInput.size = initialCellValue.length;\n  }\n  target.append(cellInput);\n\n  cellInput.focus();\n\n  cellInput.addEventListener('blur', addInputValueToTableCell);\n\n  cellInput.addEventListener('keypress', ev => {\n    if (ev.key === 'Enter') {\n      cellInput.removeEventListener('blur', addInputValueToTableCell);\n      addInputValueToTableCell();\n    }\n  });\n\n  function addInputValueToTableCell() {\n    if (!cellInput.value) {\n      target.innerHTML = initialCellValue;\n\n      return;\n    }\n\n    switch (target.cellIndex) {\n      case 0:\n      case 1:\n        if (cellInput.value.length < 4) {\n          pushNotification(10, 10, 'Error',\n            'Value is invalid. Initial value used.', 'error');\n          target.innerHTML = initialCellValue;\n        } else {\n          target.innerHTML = cellInput.value;\n        }\n        break;\n\n      case 2:\n        target.innerHTML = cellInput.value;\n        break;\n\n      case 3:\n        if ((+cellInput.value) < 18 || (+cellInput.value) > 90) {\n          pushNotification(10, 10, 'Error',\n            'Value is invalid. Initial value used.', 'error');\n          target.innerHTML = initialCellValue;\n        } else {\n          target.innerHTML = cellInput.value;\n        }\n        break;\n\n      case 4:\n        if ((+cellInput.value) < 1) {\n          pushNotification(10, 10, 'Error',\n            'Value is invalid. Initial value used.', 'error');\n          target.innerHTML = initialCellValue;\n        } else {\n          target.innerHTML = (+(cellInput.value)).toLocaleString('en-US',\n            {\n              style: 'currency',\n              currency: 'USD',\n              minimumFractionDigits: 0,\n            }\n          );\n        }\n        break;\n    }\n    cellInput.remove();\n  };\n});\n\nconst button = document.querySelector('button');\nconst inputs = document.querySelectorAll('input');\nconst select = document.querySelector('select');\n\nbutton.addEventListener('click', e => {\n  e.preventDefault();\n\n  const isValidNameLength = inputs[0].value.length > 3;\n  const isValidPositionLength = inputs[1].value.length > 3;\n  const isValidAge = +(inputs[2].value) > 17 && +(inputs[2].value) < 91;\n  const isValidSalary = inputs[3].value > 0;\n  let blockHeightReserve = 0;\n\n  for (let i = 0; i < inputs.length; i++) {\n    if (!inputs[i].value) {\n      pushNotification(10 + blockHeightReserve, 10, 'Warning',\n        `Data is invalid. ${inputs[i].name} cant be blank`, 'warning');\n      blockHeightReserve += 120;\n    }\n  }\n\n  if (!isValidNameLength) {\n    pushNotification(10 + blockHeightReserve, 10, 'Error',\n      `Name value has less than 4 letters.`, 'error');\n\n    blockHeightReserve += 120;\n  }\n\n  if (!isValidPositionLength) {\n    pushNotification(10 + blockHeightReserve, 10, 'Error',\n      `Position value has less than 4 letters.`, 'error');\n\n    blockHeightReserve += 120;\n  }\n\n  if (!isValidAge) {\n    pushNotification(10 + blockHeightReserve, 10, 'Error',\n      'Age value is less than 18 or more than 90.', 'error');\n\n    blockHeightReserve += 120;\n  }\n\n  if (!isValidSalary) {\n    pushNotification(10 + blockHeightReserve, 10, 'Error',\n      'Salary value is less than 0.', 'error');\n  }\n\n  if (isValidNameLength\n      && isValidPositionLength\n      && isValidAge\n      && isValidSalary\n  ) {\n    tbody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${inputs[0].value}</td>\n      <td>${inputs[1].value}</td>\n      <td>${select.value}</td>\n      <td>${inputs[2].value}</td>\n      <td>${(+(inputs[3].value)).toLocaleString('en-US',\n    {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n    }\n  )}</td>\n    </tr>\n  `);\n\n    pushNotification(10, 10, 'Success',\n      'A new employee is successfully added to the table.', 'success');\n\n    inputs.forEach(input => {\n      input.value = '';\n    });\n    select.selectedIndex = 0;\n  }\n});\n\nconst pushNotification = (posTop, posRight, title, description, type) => {\n  const container = document.createElement('div');\n  const blockTitle = document.createElement('h2');\n  const desc = document.createElement('p');\n\n  container.classList.add('notification', type);\n  container.dataset.qa = 'notification';\n  document.body.append(container);\n\n  blockTitle.classList.add('title');\n  blockTitle.textContent = title;\n  desc.textContent = description;\n\n  container.append(blockTitle);\n  container.append(desc);\n\n  container.style.top = posTop + 'px';\n  container.style.right = posRight + 'px';\n\n  setTimeout(() => container.remove(), 2000);\n};\n"]}